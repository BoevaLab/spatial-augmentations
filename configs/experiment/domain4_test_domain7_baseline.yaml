# @package _global_

# to execute this experiment run:
# python src/eval_domain.py experiment=domain4_test_domain7_baseline

defaults:
  - override /data: spatial_omics
  - override /model: bgrl_domain
  - override /trainer: gpu

# all parameters below will be merged with parameters from default configurations set above
# this allows you to overwrite only specified parameters

task_name: "domain4_test_domain7_baseline"
tags: ["domain4", "test", "domain7_baseline"]
ckpt_path: ${paths.log_dir}domain7_train_test_baseline/runs/2025-04-22_08-31-58/checkpoints/epoch_889.ckpt

data:
  data_dir: ${paths.data_dir}domain/raw_4/
  processed_dir: ${paths.data_dir}domain/processed_4/
  batch_size: 1
  num_workers: 0
  pin_memory: False
  min_cells: 2
  min_genes: 10
  augmentation_mode: "baseline"
  lambda_param: 0.1
  sigma_param: 0.1
  n_pca_components: 50
  graph_method: "knn"
  n_neighbors: 10
  redo_preprocess: False

model:
  net:
    encoder:
      input_size: 50
      hidden_size: 32
      output_size: 16
      dropout: 0.13
    projector:
      input_size: ${model.net.encoder.output_size}
      output_size: ${model.net.encoder.output_size}
      hidden_size: 32

  optimizer:
    _partial_: true
    lr: 0.0003
    weight_decay: 0.007

  scheduler:
    _partial_: true
    T_max: 999
    eta_min: 1e-7

  compile: false
  augmentation_mode: "baseline"
  mm: 0.95
  warmup_steps: 200
  total_steps: 999
  drop_edge_p1: 0.30
  drop_edge_p2: 0.39
  drop_feat_p1: 0.37
  drop_feat_p2: 0.21
  spatial_regularization_strength: 0.22
  node_subset_sz: 5000
  processed_dir: ${paths.data_dir}domain/processed_4/

trainer:
  min_epochs: 1
  max_epochs: 999
  log_every_n_steps: 2
  check_val_every_n_epoch: 9999
